import streamlit as st
import pandas as pd
import numpy as np

st.set_page_config(page_title="PolarView", layout="wide")
st.title("üåç‚ùÑÔ∏è PolarView ‚Äî ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÇ‡∏•‡∏Å")

# --------------------------------------------------
# 1) ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å NASA/NOAA
# --------------------------------------------------
st.header("üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å NASA/NOAA (2024)")

uploaded_file = st.file_uploader("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• CSV", type=["csv"])

if uploaded_file:
    real_data = pd.read_csv(uploaded_file)
    st.success("‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
    st.dataframe(real_data.head())

    column = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á", real_data.columns[1:])

    st.line_chart(real_data.set_index(real_data.columns[0])[column])
else:
    st.info("‡∏£‡∏≠‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å NASA/NOAA")

# --------------------------------------------------
# 2) ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á
# --------------------------------------------------
st.header("‚ùÑÔ∏è ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏±‡πâ‡∏ß‡πÇ‡∏•‡∏Å")

temp_inc = st.slider("‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÇ‡∏•‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô (¬∞C)", 0.0, 5.0, 1.5, 0.1)
years = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á", 10, 100, 50, 10)

# ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢
year_list = np.arange(0, years + 1)
ice_left = 100 - (temp_inc * 5 * (year_list / years) * 1.2)
ice_left = np.clip(ice_left, 0, 100)

sea_level = (100 - ice_left) * 0.8

df_sim = pd.DataFrame({
    "‡∏õ‡∏µ": year_list,
    "‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á (%)": ice_left,
    "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏• (mm)": sea_level
}).set_index("‡∏õ‡∏µ")

st.subheader("üìà ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á (%)")
st.line_chart(df_sim["‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á (%)"])

st.subheader("üåä ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô (mm)")
st.area_chart(df_sim["‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏• (mm)"])

# --------------------------------------------------
# 3) ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
# --------------------------------------------------
st.header("üåè ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®")

country_data = {
    "Thailand": 120,
    "Japan": 105,
    "USA": 98,
    "Bangladesh": 150,
    "Netherlands": 160
}

df_country = pd.DataFrame(list(country_data.items()), columns=["‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®", "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏• (mm)"])
df_country = df_country.set_index("‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®")

st.bar_chart(df_country)

# --------------------------------------------------
# 4) ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏õ‡∏µ 2024
# --------------------------------------------------
st.header("üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏õ‡∏µ 2024")

st.success(f"""
üîπ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÇ‡∏•‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô: **{temp_inc}¬∞C**  
üîπ ‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏±‡πâ‡∏ß‡πÇ‡∏•‡∏Å‡πÄ‡∏´‡∏•‡∏∑‡∏≠: **{ice_left[-1]:.2f}%**  
üîπ ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô: **{sea_level[-1]:.2f} ‡∏°‡∏°.**  
üîπ ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î: **Netherlands / Bangladesh**
""")

st.info("‡∏ô‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ AI/ML ‡πÑ‡∏î‡πâ")
